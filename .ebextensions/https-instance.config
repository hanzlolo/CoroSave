packages:
  yum:
    mod24_ssl : []

files:
  /etc/httpd/conf.d/ssl.conf:
    mode: "000644"
    owner: root
    group: root
    content: |
      LoadModule ssl_module modules/mod_ssl.so
      Listen 443
      <VirtualHost *:443>
        <Proxy *>
          Order deny,allow
          Allow from all
        </Proxy>

        SSLEngine             on
        SSLCertificateFile    "/etc/pki/tls/certs/server.crt"
        SSLCertificateKeyFile "/etc/pki/tls/certs/server.key"
        SSLCipherSuite        EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
        SSLProtocol           All -SSLv2 -SSLv3
        SSLHonorCipherOrder   On
        SSLSessionTickets     Off
        
        Header always set Strict-Transport-Security "max-age=63072000; includeSubdomains; preload"
        Header always set X-Frame-Options DENY
        Header always set X-Content-Type-Options nosniff
        
        ProxyPass / http://localhost:80/ retry=0
        ProxyPassReverse / http://localhost:80/
        ProxyPreserveHost on
        RequestHeader set X-Forwarded-Proto "https" early
        
      </VirtualHost>
      
  /etc/pki/tls/certs/server.crt:
    mode: "000400"
    owner: root
    group: root
    content: |
        -----BEGIN CERTIFICATE-----
        MIIGOTCCBSGgAwIBAgIJAODDYfndyGuYMA0GCSqGSIb3DQEBCwUAMIG0MQswCQYD
        VQQGEwJVUzEQMA4GA1UECBMHQXJpem9uYTETMBEGA1UEBxMKU2NvdHRzZGFsZTEa
        MBgGA1UEChMRR29EYWRkeS5jb20sIEluYy4xLTArBgNVBAsTJGh0dHA6Ly9jZXJ0
        cy5nb2RhZGR5LmNvbS9yZXBvc2l0b3J5LzEzMDEGA1UEAxMqR28gRGFkZHkgU2Vj
        dXJlIENlcnRpZmljYXRlIEF1dGhvcml0eSAtIEcyMB4XDTIwMTExMTA5MjQ0MFoX
        DTIxMTAyNzE5MDAxNVowOjEhMB8GA1UECxMYRG9tYWluIENvbnRyb2wgVmFsaWRh
        dGVkMRUwEwYDVQQDEwxjb3Jvc2F2ZS5hcHAwggEiMA0GCSqGSIb3DQEBAQUAA4IB
        DwAwggEKAoIBAQCuBI740lVO8nQpvQwOlFfgoTfZYO866xymLwj4zD/rYKK6drRA
        r9lUOhXQKhH6wkanLMn9qyMKN1QGkeS607GtJ37o+JkE4RAOMvDoUEijAB1kqiRc
        oI7mXYk1Lz2DCRsrZ2pi1vmThI66T22bUoccM+Wf3/d040bEq0ZcbcN8X1h7IX3j
        4X7TX1LYT3/p/JKFj8uwaqZQwq9lbkkjNzhnbAhQY0h6Uu/yAPFD8k2zMx9bYt53
        eoWMqB2sv8o9zDbENcDoMvjQ1ZQDuS5Iz1wJ8omYedShSuDePE3TIM5vPVtX3wmE
        mz/U1w8xReHBz7tCJYx09Fvy92i3sqXbJB13AgMBAAGjggLFMIICwTAMBgNVHRMB
        Af8EAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAOBgNVHQ8BAf8E
        BAMCBaAwOAYDVR0fBDEwLzAtoCugKYYnaHR0cDovL2NybC5nb2RhZGR5LmNvbS9n
        ZGlnMnMxLTI0NDkuY3JsMF0GA1UdIARWMFQwSAYLYIZIAYb9bQEHFwEwOTA3Bggr
        BgEFBQcCARYraHR0cDovL2NlcnRpZmljYXRlcy5nb2RhZGR5LmNvbS9yZXBvc2l0
        b3J5LzAIBgZngQwBAgEwdgYIKwYBBQUHAQEEajBoMCQGCCsGAQUFBzABhhhodHRw
        Oi8vb2NzcC5nb2RhZGR5LmNvbS8wQAYIKwYBBQUHMAKGNGh0dHA6Ly9jZXJ0aWZp
        Y2F0ZXMuZ29kYWRkeS5jb20vcmVwb3NpdG9yeS9nZGlnMi5jcnQwHwYDVR0jBBgw
        FoAUQMK9J47MNIMwojPX+2yz8LQsgM4wKQYDVR0RBCIwIIIMY29yb3NhdmUuYXBw
        ghB3d3cuY29yb3NhdmUuYXBwMB0GA1UdDgQWBBTaww0afG9LhxFXpqQP8MXtHF6t
        DzCCAQQGCisGAQQB1nkCBAIEgfUEgfIA8AB2APZclC/RdzAiFFQYCDCUVo7jTRMZ
        M7/fDC8gC8xO8WTjAAABdbafGGIAAAQDAEcwRQIhAKRt+o+QE6+BFzgzVt/Ig9BO
        zP7WBx/9El7BQnDHZ0sOAiAHqG0oGEND+Ozzse7Dtn6AmgheSDlnEcwbzvCIehmP
        WgB2AFzcQ5L+5qtFRLFemtRW5hA3+9X6R9yhc5SyXub2xw7KAAABdbafGYoAAAQD
        AEcwRQIhAMK985S+1UQ7EhgncHwY/aKF93Gf+99joRlLY6Pn1HXCAiA2lALfsOYL
        IC1n4XF5VwK6os9UWgMfDr81ZsZAahYSCjANBgkqhkiG9w0BAQsFAAOCAQEAfdyJ
        NTGVjB4K85oj6fVe79RjM9R9JJ/c2G7iH+AvdVPRgtcobHGng2kY3BF6xKdmfSSl
        qz4s/q0UPKjFP2TN5yXSP4hbo3/E28pFVFmjYLJ/IX111we8j9fAx7ACazQKfHU4
        4WD8eQE2UEtqsvlgbUNm+ksjUhZbZLpkm953FcdNHyHRCXD2A1xQzythRfh4tO12
        9nGdt+hXBUTyY8Got3v3RLCJwwvSBFU2+mMWrYwst5zIvNDcOJvcXjZVc6ekvB2w
        TH7B82gQhVabTCFB9x72zT2u8aXAa9S6Rugrw5ZZAxYLCZZee1hiuUqoO9UtWdOq
        IiQuGVAAoo/4Us6mqQ==
        -----END CERTIFICATE-----
      
  /etc/pki/tls/certs/server.key:
    mode: "000400"
    owner: root
    group: root
    content: |
        -----BEGIN RSA PRIVATE KEY-----
        MIIEowIBAAKCAQEA7vvwMWJWSdOLBjNKhKihnDiRbZ/d6NA3x4KCTVDkDUOMaZoF
        xXs/COjV3YDDm/AwV8tAXySoN0jlP9ya9aBqwFUOFzyP3ftzkhCCrn4nmkR8Ogk4
        dlkDH02b8ACV21sgg2epVhnK952GDpDGx4CgJcVLEUm/90ndL9Zn+H9XEuZys3te
        ADNKbaCVjp1HSgoHahazWmO8RDmI4QX3FRep9ttjDMN8tDf97BY6GYgBO5WxuCuT
        AeOx3P/XesR+H11qObiaDwJ0GGmaVslG4DmiFsf8WMq/HXaqZGBOUh+f2zrdRY+t
        u3cuvQvnb7lhOIusoIYFwZxeX8fcxusXowVZ5QIDAQABAoIBAAE/Q1OepcCg3/ra
        Tas/jghYqzmdOfU7EO9zmOZ6Y5ZGIfdzHFCZggyz2lnbkCnCKR5sKxvT/yS6tqeM
        qSpa+fOi/f3VDRMlesbqWyQ5+E7vyI4s+iRz9nY1W3j3J9ELOrI02kdevxZntglh
        bAgifbN0wh2G+v95XTQgtE4xq+ynUKD6B9LNzqOJ/fBiP3iQQYcA/XTTN1aqPkey
        btSlOexbShFieIXohKAsO/kd0ppzE/SB+Mzxeh0q1XNulfqlWj7JZ/PAqCCtvXu9
        KznOPt/yDRPBbhArGnvodsx8ETtgRzpsCZKVdYL9+4kOPOROtI6P7qQCC7KGj70B
        hqkoX0kCgYEA+tW/+fle/KgU/G6CmrCayZwRVjw997pY9fjDFxKLBrT8TadWPYYP
        Muzzp+pmICsvb0RmRzH3XcmXieQ1NyGzTkUcOamSbOJAksyhGVnG2z1aJBxe2wnB
        iu+b5aJKaW7Lyy1ws+hzu7lunjr4DYvcVyJ4cvUXReDZRU/a+mafnbcCgYEA8+e3
        zDKFYDnYVvkKUKualq+xLtjHVFjJaQipxz/jCt4oH18JAwN2PcEceThEhYnmtIpI
        Dz5/v2ILBYePt9i853QfkO62evvfjStaWzSBPPmr9NM/HUQ83lMfM5Q8uRX4WW4B
        CdO9A+SN65w5IdzklOr5NgZkYWzF+RlMPygphUMCgYA4HPs+a6fxM5TGR96Vxm5K
        Lcy/Euj1800VcZoLHk3VqUVMBeRIDSZ3SQTVCp3gEmkhJhcPVEE3TPLGmTPCapqX
        JuTCjYnBK/gwHvDnH+tZfmcc7u/VZmBSuXmRrHWjEnMqt7afuJ+zXi893IlDVodr
        Qr3ZUbTsH/nbBJtDKxQIDwKBgCggcS6ZCTRhj+QPKNFIyjAMS5wncfPAf7JWCIiN
        TC8XiYZPvk3Onf9e6+5NgYhuvZPqRByt7Zpw6NtKCCz47WsuwZq4izEEiyzQexcS
        Nkjv0oh+0J1iApmZF0MHGk5g/PDJlkYlna0sRuUCWKvniXuuhL2Mo6sbmB55OQAS
        /XG9AoGBAKOrKO15tcw6uozIzPOoyLWpeUJ5HEn22v2tdT43aF+g/WVe/t9598mx
        EkuyOW3dlQySp+TYsoCtt+oIX2EzTWlhr0fMsRpZrfOb0zT1zZMkJ7oxZ7oAjx9n
        EaOO9hv8SDqN6rPxJMLfaTVZp6xj8If8dcwadScXwJqh8uWtJhlF
        -----END RSA PRIVATE KEY-----
